<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (9-internal) on Sun Oct 22 23:15:32 MSK 2017 -->
<title>Database</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="date" content="2017-10-22">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Database";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/garret/perst/CustomSerializer.html" title="interface in org.garret.perst"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/garret/perst/EmbeddedLink.html" title="interface in org.garret.perst"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/garret/perst/Database.html" target="_top">Frames</a></li>
<li><a href="Database.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><span>SEARCH:&nbsp;</span>
<input type="text" id="search" value=" " disabled="disabled">
<input type="reset" id="reset" value=" " disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInClass">Package</span>&nbsp;<a href="../../../org/garret/perst/package-summary.html">org.garret.perst</a></div>
<h2 title="Class Database" class="title">Class Database</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.garret.perst.Database</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Database</span>
extends java.lang.Object</pre>
<div class="block">This class emulates relational database on top of Perst storage
 It maintain class extends, associated indices, prepare queries.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#Database-org.garret.perst.Storage-">Database</a></span>(<a href="../../../org/garret/perst/Storage.html" title="interface in org.garret.perst">Storage</a>&nbsp;storage)</code>
<div class="block">Constructor of single threaded database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#Database-org.garret.perst.Storage-boolean-">Database</a></span>(<a href="../../../org/garret/perst/Storage.html" title="interface in org.garret.perst">Storage</a>&nbsp;storage,
        boolean&nbsp;multithreaded)</code>
<div class="block">Constructor of database.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#addRecord-java.lang.Class-org.garret.perst.IPersistent-">addRecord</a></span>(java.lang.Class&nbsp;table,
         <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</code>
<div class="block">Add new record to the specified table.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#addRecord-org.garret.perst.IPersistent-">addRecord</a></span>(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</code>
<div class="block">Add new record to the table.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#beginTransaction--">beginTransaction</a></span>()</code>
<div class="block">Begin transaction</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#commitTransaction--">commitTransaction</a></span>()</code>
<div class="block">Commit transaction</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#createIndex-java.lang.Class-java.lang.String-boolean-">createIndex</a></span>(java.lang.Class&nbsp;table,
           java.lang.String&nbsp;key,
           boolean&nbsp;unique)</code>
<div class="block">Add new index to the table.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#createTable-java.lang.Class-">createTable</a></span>(java.lang.Class&nbsp;table)</code>
<div class="block">Create table for the specified class.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#deleteRecord-java.lang.Class-org.garret.perst.IPersistent-">deleteRecord</a></span>(java.lang.Class&nbsp;table,
            <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</code>
<div class="block">Delete record from the specified table.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#deleteRecord-org.garret.perst.IPersistent-">deleteRecord</a></span>(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</code>
<div class="block">Delete record from the table.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#dropIndex-java.lang.Class-java.lang.String-">dropIndex</a></span>(java.lang.Class&nbsp;table,
         java.lang.String&nbsp;key)</code>
<div class="block">Drop index for the specified table and key.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#dropTable-java.lang.Class-">dropTable</a></span>(java.lang.Class&nbsp;table)</code>
<div class="block">Drop table associated with this class.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#excludeFromIndex-java.lang.Class-org.garret.perst.IPersistent-java.lang.String-">excludeFromIndex</a></span>(java.lang.Class&nbsp;table,
                <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
                java.lang.String&nbsp;key)</code>
<div class="block">Exclude record from specified index.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#excludeFromIndex-org.garret.perst.IPersistent-java.lang.String-">excludeFromIndex</a></span>(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
                java.lang.String&nbsp;key)</code>
<div class="block">Exclude record from specified index.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.util.HashMap</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#getIndices-java.lang.Class-">getIndices</a></span>(java.lang.Class&nbsp;table)</code>
<div class="block">Get indices for the specified table</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.util.Iterator</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#getRecords-java.lang.Class-">getRecords</a></span>(java.lang.Class&nbsp;table)</code>
<div class="block">Get iterator through all table records</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.util.Iterator</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#getRecords-java.lang.Class-boolean-">getRecords</a></span>(java.lang.Class&nbsp;table,
          boolean&nbsp;forUpdate)</code>
<div class="block">Get iterator through all table records</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="../../../org/garret/perst/Storage.html" title="interface in org.garret.perst">Storage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#getStorage--">getStorage</a></span>()</code>
<div class="block">Get storage associated with this database</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#includeInIndex-java.lang.Class-org.garret.perst.IPersistent-java.lang.String-">includeInIndex</a></span>(java.lang.Class&nbsp;table,
              <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
              java.lang.String&nbsp;key)</code>
<div class="block">Include record in the specified index.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#includeInIndex-org.garret.perst.IPersistent-java.lang.String-">includeInIndex</a></span>(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
              java.lang.String&nbsp;key)</code>
<div class="block">Include record in the specified index.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="../../../org/garret/perst/Query.html" title="interface in org.garret.perst">Query</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#prepare-java.lang.Class-java.lang.String-">prepare</a></span>(java.lang.Class&nbsp;table,
       java.lang.String&nbsp;predicate)</code>
<div class="block">Prepare JSQL query.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="../../../org/garret/perst/Query.html" title="interface in org.garret.perst">Query</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#prepare-java.lang.Class-java.lang.String-boolean-">prepare</a></span>(java.lang.Class&nbsp;table,
       java.lang.String&nbsp;predicate,
       boolean&nbsp;forUpdate)</code>
<div class="block">Prepare JSQL query.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#rollbackTransaction--">rollbackTransaction</a></span>()</code>
<div class="block">Rollback transaction</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>java.util.Iterator</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#select-java.lang.Class-java.lang.String-">select</a></span>(java.lang.Class&nbsp;table,
      java.lang.String&nbsp;predicate)</code>
<div class="block">Select record from specified table</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>java.util.Iterator</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/garret/perst/Database.html#select-java.lang.Class-java.lang.String-boolean-">select</a></span>(java.lang.Class&nbsp;table,
      java.lang.String&nbsp;predicate,
      boolean&nbsp;forUpdate)</code>
<div class="block">Select record from specified table</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Database-org.garret.perst.Storage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Database</h4>
<pre>public&nbsp;Database(<a href="../../../org/garret/perst/Storage.html" title="interface in org.garret.perst">Storage</a>&nbsp;storage)</pre>
<div class="block">Constructor of single threaded database. This method initialize database if it not initialized yet.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storage</code> - opened storage. Storage should be either empty (non-initialized, either
 previously initialized by the this method. It is not possible to open storage with 
 root object other than table index created by this constructor.</dd>
</dl>
</li>
</ul>
<a name="Database-org.garret.perst.Storage-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Database</h4>
<pre>public&nbsp;Database(<a href="../../../org/garret/perst/Storage.html" title="interface in org.garret.perst">Storage</a>&nbsp;storage,
                boolean&nbsp;multithreaded)</pre>
<div class="block">Constructor of database. This method initialize database if it not initialized yet.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>storage</code> - opened storage. Storage should be either empty (non-initialized, either
 previously initialized by the this method. It is not possible to open storage with 
 root object other than table index created by this constructor.</dd>
<dd><code>multithreaded</code> - <code>true</code> if database should support concurrent access
 to the data from multiple threads.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addRecord-java.lang.Class-org.garret.perst.IPersistent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre>public&nbsp;boolean&nbsp;addRecord(java.lang.Class&nbsp;table,
                         <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</pre>
<div class="block">Add new record to the specified table. Record is inserted in table corresponding to the specified class.
 Record will be automatically added to all indices existed for this table.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>record</code> - object to be inserted in the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record was successfully added to the table, <code>false</code>
 if there is already such record (object with the same ID) in the table or there is some record with the same value of 
 unique key field</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 record class</dd>
</dl>
</li>
</ul>
<a name="addRecord-org.garret.perst.IPersistent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRecord</h4>
<pre>public&nbsp;boolean&nbsp;addRecord(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</pre>
<div class="block">Add new record to the table. Record is inserted in table corresponding to the class of the object.
 Record will be automatically added to all indices existed for this table.
 If there is no table associated with class of this object, then 
 database will search for table associated with superclass and so on...</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>record</code> - object to be inserted in the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record was successfully added to the table, <code>false</code>
 if there is already such record (object with the same ID) in the table or there is some record with the same value of 
 unique key field</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 record class</dd>
</dl>
</li>
</ul>
<a name="beginTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginTransaction</h4>
<pre>public&nbsp;void&nbsp;beginTransaction()</pre>
<div class="block">Begin transaction</div>
</li>
</ul>
<a name="commitTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitTransaction</h4>
<pre>public&nbsp;void&nbsp;commitTransaction()</pre>
<div class="block">Commit transaction</div>
</li>
</ul>
<a name="createIndex-java.lang.Class-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createIndex</h4>
<pre>public&nbsp;boolean&nbsp;createIndex(java.lang.Class&nbsp;table,
                           java.lang.String&nbsp;key,
                           boolean&nbsp;unique)</pre>
<div class="block">Add new index to the table. If such index already exists this method does nothing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>key</code> - field of the class to be indexed</dd>
<dd><code>unique</code> - if index is unique or not</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if index is created, <code>false</code> if index
 already exists</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="createTable-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTable</h4>
<pre>public&nbsp;boolean&nbsp;createTable(java.lang.Class&nbsp;table)</pre>
<div class="block">Create table for the specified class.
 This function does nothing if table for such class already exists</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if table is created, <code>false</code> if table 
 alreay exists</dd>
</dl>
</li>
</ul>
<a name="deleteRecord-java.lang.Class-org.garret.perst.IPersistent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteRecord</h4>
<pre>public&nbsp;boolean&nbsp;deleteRecord(java.lang.Class&nbsp;table,
                            <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</pre>
<div class="block">Delete record from the specified table. Record is removed from the table corresponding to the 
 specified class. Record will be automatically added to all indices existed for this table.
 Object represented the record will be also deleted from the storage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>record</code> - object to be deleted from the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record was successfully deleted from the table, <code>false</code>
 if there is not such record (object with the same ID) in the table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 specified class</dd>
</dl>
</li>
</ul>
<a name="deleteRecord-org.garret.perst.IPersistent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteRecord</h4>
<pre>public&nbsp;boolean&nbsp;deleteRecord(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record)</pre>
<div class="block">Delete record from the table. Record is removed from the table corresponding to the class 
 of the object. Record will be automatically added to all indices existed for this table.
 If there is no table associated with class of this object, then 
 database will search for table associated with superclass and so on...
 Object represented the record will be also deleted from the storage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>record</code> - object to be deleted from the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record was successfully deleted from the table, <code>false</code>
 if there is not such record (object with the same ID) in the table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 record class</dd>
</dl>
</li>
</ul>
<a name="dropIndex-java.lang.Class-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropIndex</h4>
<pre>public&nbsp;boolean&nbsp;dropIndex(java.lang.Class&nbsp;table,
                         java.lang.String&nbsp;key)</pre>
<div class="block">Drop index for the specified table and key.
 Does nothing if there is no such index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>key</code> - field of the class to be indexed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if index is deleted, <code>false</code> if index
 is not found</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="dropTable-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropTable</h4>
<pre>public&nbsp;boolean&nbsp;dropTable(java.lang.Class&nbsp;table)</pre>
<div class="block">Drop table associated with this class. Do nothing if there is no such table in the database.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if table is deleted, <code>false</code> if table 
 is not found</dd>
</dl>
</li>
</ul>
<a name="excludeFromIndex-java.lang.Class-org.garret.perst.IPersistent-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>excludeFromIndex</h4>
<pre>public&nbsp;boolean&nbsp;excludeFromIndex(java.lang.Class&nbsp;table,
                                <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
                                java.lang.String&nbsp;key)</pre>
<div class="block">Exclude record from specified index. This method is needed to perform update of indexed
 field (key). Before updating the record, it is necessary to exclude it from indices
 which keys are affected. After updating the field, record should be reinserted in these indices
 using includeInIndex method.<P>
 If there is no table associated with class of this object, then 
 database will search for table associated with superclass and so on...<P>
 This method does nothing if there is no index for the specified field.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>record</code> - object to be excluded from the specified index</dd>
<dd><code>key</code> - name of the indexed field</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record is excluded from index, <code>false</code> if 
 there is no such index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="excludeFromIndex-org.garret.perst.IPersistent-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>excludeFromIndex</h4>
<pre>public&nbsp;boolean&nbsp;excludeFromIndex(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
                                java.lang.String&nbsp;key)</pre>
<div class="block">Exclude record from specified index. This method is needed to perform update of indexed
 field (key). Before updating the record, it is necessary to exclude it from indices
 which keys are affected. After updating the field, record should be reinserted in these indices
 using includeInIndex method.<P>
 If there is no table associated with class of this object, then 
 database will search for table associated with superclass and so on...<P>
 This method does nothing if there is no index for the specified field.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>record</code> - object to be excluded from the specified index</dd>
<dd><code>key</code> - name of the indexed field</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record is excluded from index, <code>false</code> if 
 there is no such index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 record class</dd>
</dl>
</li>
</ul>
<a name="getIndices-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndices</h4>
<pre>public&nbsp;java.util.HashMap&nbsp;getIndices(java.lang.Class&nbsp;table)</pre>
<div class="block">Get indices for the specified table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>map of table indices</dd>
</dl>
</li>
</ul>
<a name="getRecords-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecords</h4>
<pre>public&nbsp;java.util.Iterator&nbsp;getRecords(java.lang.Class&nbsp;table)</pre>
<div class="block">Get iterator through all table records</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>iterator through all table records.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="getRecords-java.lang.Class-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecords</h4>
<pre>public&nbsp;java.util.Iterator&nbsp;getRecords(java.lang.Class&nbsp;table,
                                     boolean&nbsp;forUpdate)</pre>
<div class="block">Get iterator through all table records</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>forUpdate</code> - <code>true</code> if records are selected for update - in this case exclusive lock is set 
 for the table to avoid deadlock.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>iterator through all table records.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="getStorage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorage</h4>
<pre>public&nbsp;<a href="../../../org/garret/perst/Storage.html" title="interface in org.garret.perst">Storage</a>&nbsp;getStorage()</pre>
<div class="block">Get storage associated with this database</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>underlying storage</dd>
</dl>
</li>
</ul>
<a name="includeInIndex-java.lang.Class-org.garret.perst.IPersistent-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>includeInIndex</h4>
<pre>public&nbsp;boolean&nbsp;includeInIndex(java.lang.Class&nbsp;table,
                              <a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
                              java.lang.String&nbsp;key)</pre>
<div class="block">Include record in the specified index. This method is needed to perform update of indexed
 field (key). Before updating the record, it is necessary to exclude it from indices
 which keys are affected using excludeFromIndex method. After updating the field, record should be 
 reinserted in these indices using this method.<P>
 If there is no table associated with class of this object, then 
 database will search for table associated with superclass and so on...<P>
 This method does nothing if there is no index for the specified field.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>record</code> - object to be excluded from the specified index</dd>
<dd><code>key</code> - name of the indexed field</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record is included in index, <code>false</code> if 
 there is no such index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="includeInIndex-org.garret.perst.IPersistent-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>includeInIndex</h4>
<pre>public&nbsp;boolean&nbsp;includeInIndex(<a href="../../../org/garret/perst/IPersistent.html" title="interface in org.garret.perst">IPersistent</a>&nbsp;record,
                              java.lang.String&nbsp;key)</pre>
<div class="block">Include record in the specified index. This method is needed to perform update of indexed
 field (key). Before updating the record, it is necessary to exclude it from indices
 which keys are affected using excludeFromIndex method. After updating the field, record should be 
 reinserted in these indices using this method.<P>
 If there is no table associated with class of this object, then 
 database will search for table associated with superclass and so on...<P>
 This method does nothing if there is no index for the specified field.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>record</code> - object to be excluded from the specified index</dd>
<dd><code>key</code> - name of the indexed field</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if record is included in index, <code>false</code> if 
 there is no such index</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
</dl>
</li>
</ul>
<a name="prepare-java.lang.Class-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare</h4>
<pre>public&nbsp;<a href="../../../org/garret/perst/Query.html" title="interface in org.garret.perst">Query</a>&nbsp;prepare(java.lang.Class&nbsp;table,
                     java.lang.String&nbsp;predicate)</pre>
<div class="block">Prepare JSQL query. Prepare is needed for queries with parameters. Also
 preparing query can improve speed if query will be executed multiple times
 (using prepare, it is compiled only once).<P>
 To execute prepared query, you should use Query.execute(db.getRecords(XYZ.class)) method</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>predicate</code> - search predicate</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
<dd><code><a href="../../../org/garret/perst/CompileError.html" title="class in org.garret.perst">CompileError</a></code> - exception is thrown if predicate is not valid JSQL exception</dd>
</dl>
</li>
</ul>
<a name="prepare-java.lang.Class-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare</h4>
<pre>public&nbsp;<a href="../../../org/garret/perst/Query.html" title="interface in org.garret.perst">Query</a>&nbsp;prepare(java.lang.Class&nbsp;table,
                     java.lang.String&nbsp;predicate,
                     boolean&nbsp;forUpdate)</pre>
<div class="block">Prepare JSQL query. Prepare is needed for queries with parameters. Also
 preparing query can improve speed if query will be executed multiple times
 (using prepare, it is compiled only once).<P>
 To execute prepared query, you should use Query.execute(db.getRecords(XYZ.class)) method</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>predicate</code> - search predicate</dd>
<dd><code>forUpdate</code> - <code>true</code> if records are selected for update - in this case exclusive lock is set 
 for the table to avoid deadlock.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
<dd><code><a href="../../../org/garret/perst/CompileError.html" title="class in org.garret.perst">CompileError</a></code> - exception is thrown if predicate is not valid JSQL exception</dd>
</dl>
</li>
</ul>
<a name="rollbackTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackTransaction</h4>
<pre>public&nbsp;void&nbsp;rollbackTransaction()</pre>
<div class="block">Rollback transaction</div>
</li>
</ul>
<a name="select-java.lang.Class-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>select</h4>
<pre>public&nbsp;java.util.Iterator&nbsp;select(java.lang.Class&nbsp;table,
                                 java.lang.String&nbsp;predicate)</pre>
<div class="block">Select record from specified table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>predicate</code> - search predicate</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>iterator through selected records. This iterator doesn't support remove() method</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
<dd><code><a href="../../../org/garret/perst/CompileError.html" title="class in org.garret.perst">CompileError</a></code> - exception is thrown if predicate is not valid JSQL exception</dd>
<dd><code><a href="../../../org/garret/perst/JSQLRuntimeException.html" title="class in org.garret.perst">JSQLRuntimeException</a></code> - exception is thrown if there is runtime error during query execution</dd>
</dl>
</li>
</ul>
<a name="select-java.lang.Class-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>select</h4>
<pre>public&nbsp;java.util.Iterator&nbsp;select(java.lang.Class&nbsp;table,
                                 java.lang.String&nbsp;predicate,
                                 boolean&nbsp;forUpdate)</pre>
<div class="block">Select record from specified table</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>table</code> - class corresponding to the table</dd>
<dd><code>predicate</code> - search predicate</dd>
<dd><code>forUpdate</code> - <code>true</code> if records are selected for update - in this case exclusive lock is set 
 for the table to avoid deadlock.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>iterator through selected records. This iterator doesn't support remove() method</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/garret/perst/StorageError.html" title="class in org.garret.perst">StorageError</a></code> - (CLASS_NOT_FOUND) exception is thrown if there is no table corresponding to 
 the specified class</dd>
<dd><code><a href="../../../org/garret/perst/CompileError.html" title="class in org.garret.perst">CompileError</a></code> - exception is thrown if predicate is not valid JSQL exception</dd>
<dd><code><a href="../../../org/garret/perst/JSQLRuntimeException.html" title="class in org.garret.perst">JSQLRuntimeException</a></code> - exception is thrown if there is runtime error during query execution</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/garret/perst/CustomSerializer.html" title="interface in org.garret.perst"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/garret/perst/EmbeddedLink.html" title="interface in org.garret.perst"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/garret/perst/Database.html" target="_top">Frames</a></li>
<li><a href="Database.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
